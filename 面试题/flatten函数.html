<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        var arr = [1, 2, 3, [4, 5],
            [6, [7, [8]]]
        ]

        /* 使用递归的方式处理
        wrap内保存结果ret
        返回一个递归函数 
        方案一*/
        // function wrap(){
        //     var ret = [];
        //     return function flat(a){
        //         for(var item of a){
        //             if(item.constructor===Array){
        //                 ret.concat(flat(item))
        //             }else{
        //                 ret.push(item)
        //             }
        //         }
        //         return ret
        //     }
        // }
        // console.log(wrap()(arr))

        /* 方案二 */
        const flatten = function (arr) {
            while (arr.some(item => Array.isArray(item))){
                arr = [].concat(...arr)
            }
            return arr
        }
        console.log(flatten(arr))
        // es6简写
        const flatten = array => array.reduce((acc, cur) => (Array.isArray(cur) ? [...acc, ...flatten(cur)] : [...acc, cur]), [])
    </script>
</body>

</html>